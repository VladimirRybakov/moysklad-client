/**
 * Logger (node.js context)
 * Date: 11.01.14
 * Vitaliy V. Makeev (w.makeev@gmail.com)
 */

//TODO Изменить шаблоны вывода лога и добавить цвет

// https://github.com/baryon/tracer

var colors = require('colors');

var logger = require('tracer').colorConsole({
    format: [
        "{{timestamp}} {{libName}} {{title}}: {{message}} ({{file}}:{{line}})"
    ],
    dateformat: "HH:MM:ss",
    preprocess: function (data) {
        data.timestamp  = colors.grey(data.timestamp);

        var titleColor, messageColor;

        switch (data.title) {

            case 'debug':
                titleColor = 'blue';
                break;

            case 'info':
                titleColor = 'green';
                break;

            case 'warn':
                titleColor = 'yellow';
                break;

            case 'error':
                titleColor = messageColor = 'red';
                break;

            default :

        }
        if (titleColor) data.title = colors[titleColor](data.title);
        if (messageColor) data.message = colors[messageColor](data.message);
        data.libName = colors.grey('moysklad-client');

    }
});

logger.time = function (name) {
    console.time(name);
};

logger.timeEnd = function (name) {
    console.timeEnd(name);
};

module.exports = logger;