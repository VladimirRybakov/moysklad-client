/**
 * reserve
 * Date: 16.06.14
 * Vitaliy V. Makeev (w.makeev@gmail.com)
 */

var _ = require('lodash')
  , instanceOf = require('./instanceOf')
  , getPositions = require('./getPositions');

var reserve = function (order) {
    // Резерв только для заказов
    if (instanceOf(order, 'order')) {

        _.forEach(getPositions(order), function (position) {
            position.reserve = position.quantity;
        });

        order.reservedSum = order.sum.sum;
    }
};

module.exports = reserve;