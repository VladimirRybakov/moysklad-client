/**
 * getAttribute
 * Date: 20.04.14
 * Vitaliy V. Makeev (w.makeev@gmail.com)
 */

var _ = require('lodash');

/**
 * Возвращает атрибут объекта. Если атрибут не определен, то пустой объект
 * (функция getValue привязывается, в том числе, и к пустому объекту)
 *
 * @param entity
 * @param metadataUuid
 * @returns {{}}
 */
var getAttribute = function (entity, metadataUuid) {
    var attribute = {},
        that = this;

    if (entity && entity.attribute) {
        attribute = _.find(entity.attribute, { metadataUuid: metadataUuid });
    }

    attribute.getValue = function () {
        return that.getAttributeValue(attribute);
    };

    return attribute;
};

module.exports = getAttribute;